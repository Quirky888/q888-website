#Q888 Website Rules (Canonical) — v1.2

## 0) Prime Directive
Preserve the established aesthetic and hierarchy.
When in doubt: keep it quieter, smaller, and closer to the existing system.

---
Q888 OVERRIDE: OverpricedStickersSection Background Freedom

**OverpricedStickersSection.astro is exempt from background guardrails:**

ALLOWED (this component only):
- Modify backgrounds, transparency, glass effects
- Use `bg-[var(--bg-fog)]`, `backdrop-blur`, `bg-transparent !important`
- Edge-to-edge layouts (`w-screen`, viewport calc margins)
- Explicit `rgba(var(--bg-fog-rgb), X)` syntax
- Faint overlays (::before grids)

REQUIREMENT:
- Must match InfociganSection visual DNA (`--bg-fog` family)
- Cards may use `bg-transparent` to inherit parent fog
- Ticker MUST use fog-glass (`bg-[var(--bg-fog)]/90 + blur`)

FORBIDDEN (still):
- Touch `tokens.css`
- Change Landing/hero backgrounds
- Global nav/layout changes
----

## Tone
- Quiet confidence, system-aware, human.
- No marketing CTA language.
- Humor only in Infocigan microcopy, never in recruiter-facing Contact.

---

## Visual (Global)
- Landing background: near-white fog with subtle grain.
- Typography: primary sans + monospace for system metadata.
- Spacing: generous margins; whitespace is active.
- Borders: thin, soft (use existing tokens only).

Forbidden unless explicitly requested:
- Changing font families
- Changing global type scale
- Changing landing layout/hero hierarchy
- Adding decorative UI (shadows/cards/glass effects/icons)
- Changing background gradient/noise behavior

---

## Motion
- Implied, restrained. No loops that beg attention.
- Allowed: opacity settling, rare metadata flicker, slow micro drift.
- Forbidden: playful easing, bouncy transitions, loud parallax, scroll-jacking.

Accessibility:
- Must respect prefers-reduced-motion.
- When reduced motion is enabled: no transforms left behind, navigation becomes instant.

---

## Navigation
- Directional reveal (left/right) is a meaning ritual, not a normal page jump.
- Toolbar is an instrument panel: Q888 / Projects / Infocigan / Contact.
- Exits must feel like retreat, not teleport.

IMPORTANT:
- Default site structure is a SINGLE continuous scroll with anchors:
  #landing → #projects → #infocigan → #contact
- Do NOT introduce multi-page routing for projects unless explicitly requested.
- Projects open as an in-page directional reveal / drawer (left/right) by default.

---

## System Status / Mood Bars (Global)
- SystemMeta is global and persistent (top + bottom), consistent with landing style.
- Content (values) may change per section; styling must not change.
- Allowed animation: subtle crossfade only (no typewriter, no flashing).

---

## Infocigan
- Not a store UI. No cart, no checkout, no filters, no urgency.
- Floating artifacts, portal hub, contact-first.
- “Products” are zones/artifacts, not SKUs.
- Humor is optional; never explain the joke too early.

---

## Quality
- Prefer simple, readable code. Avoid over-engineering.
- Optimize images, lazy-load large assets.
- No debug UI/logs unless explicitly requested.
- Keep selectors stable; avoid brittle DOM assumptions.

---

## Responsive Consistency Rule (Non-Negotiable)

Goal:
The UI must remain visually consistent across different monitor sizes, aspect ratios, and browser zoom levels (80%–125%).
“Looks good on my 13-inch MacBook at 100%” is NOT sufficient.

Mandatory constraints:
1) One container contract per section
- Each section must follow: OUTER (full width) + INNER (max-w + mx-auto + consistent px rhythm).
- Do not mix multiple competing max-w/px systems inside the same section unless explicitly requested.

2) No fragile viewport math inside scroll containers
- Avoid width:100vw / left:50% / margin-left:-50vw patterns inside drawers, portals, or any scrollable container.
- Full-bleed must be computed relative to the container padding (negative margins based on padding), not viewport.

3) Scroll-lock must not shift layout width
- Any overlay/drawer/portal that locks scroll must compensate for scrollbar width and restore prior inline styles exactly.
- Opening/closing overlays must not cause horizontal “nudge” on systems with non-overlay scrollbars.

4) Alignment is grid-based, not eyeballed
- Use a shared grid rhythm: consistent px breakpoints and max-w values across sections.
- Paired media blocks must share the same grid parent, column spans, and gap rules.

5) Avoid absolute positioning for alignment-critical layout
- Absolute positioning is allowed only for effects/overlays.
- Primary content alignment must be achieved through normal flow (grid/flex) inside the container contract.

Required verification for every PR:
- Desktop widths: ~1280px, ~1440px, ~1728px (or equivalent by resizing window)
- Zoom levels: 80%, 100%, 125%
- Mobile widths: ~375px and ~430px
- Check: no horizontal scroll, edges align (text + images), no overlay open/close nudge

Stop condition:
If a requested change cannot meet these constraints without touching files outside scope, STOP and ask first.

---

## Content Editing Rule: Section Markers (Non-Negotiable)

Problem:
Cursor struggles with "simple text swaps" because insertion points are ambiguous in long Astro components.

Solution:
All long-form content MUST be wrapped in explicit section anchors. Edits must target anchors, never "approximate" locations.

Marker format (exact):
<!-- Q888:SECTION_START id="UNIQUE_ID" -->
...section markup...
<!-- Q888:SECTION_END id="UNIQUE_ID" -->

Rules:
1) Every major content block (H2 section) must have a UNIQUE id.
2) Any request to "add text after/before X" must be executed by inserting content:
   - after <!-- Q888:SECTION_END id="X" -->, OR
   - between end of X and start of Y if both exist.
3) Any request to "swap/update text in X" must ONLY modify content inside X's START/END markers.
4) Do NOT refactor surrounding layout, classes, or spacing when doing content swaps.
5) If markers for the target section do not exist:
   - FIRST add markers around the relevant sections (no other changes),
   - THEN perform the requested edit using those markers.
6) If the assistant cannot find the markers, STOP and report which ids exist.

Acceptance check:
- A content change is only "done" if the targeted START/END markers are present and only that bounded region changed.

---

# Strict Guardrails (Non-Negotiable)

1) **Do NOT redesign the Landing page.**
   No typography changes, no new nav bars, no new spacing system,
   no background changes, no new fonts.

2) **Do NOT modify `src/styles/tokens.css`** unless explicitly requested.

3) **Only modify files explicitly listed in the task.**
   If another file must change, STOP and ask—never change it silently.

4) **Small diffs only.**
   Prefer adding new components/scripts over rewriting existing ones.

5) **No debug UI.**
   No outlines, markers, or console logs unless explicitly requested for debugging.

6) **Preserve existing motion logic** for ProjectsThreshold center reveal
   (`centerReveal.ts`, `thresholdMotion.ts`) unless explicitly asked to change.

7) **Do NOT create new routes/pages or a router-based architecture**
   (e.g. /digital-ink, /edinburgh-map) unless explicitly requested.

8) **Do NOT introduce a new navigation paradigm**
   (hamburger redesigns, sidebars, mega menus, sticky headers with new styling)
   unless explicitly requested.

---

# Working Agreement (Required Response Format)

Every response must follow this structure:

## 1) Files I will change
List each file path that will be modified or created.

## 2) What will NOT change
Explicitly confirm which protected files/systems remain untouched
(Landing design, tokens.css, motion scripts, etc.).

## 3) Implementation
Make the changes.

## 4) How to verify
Provide a short checklist to confirm the change works as intended.

---

# STOP & ASK FIRST — Red Flags
If you are about to do any of the following, STOP and ask first:
- change typography scale or font family
- change landing layout/hero hierarchy
- add a top nav that wasn’t requested
- convert single-page into multi-page
- modify tokens.css
- replace GSAP behavior with a different library
- rewrite Layout.astro structure instead of adding minimal wrappers
- introduce width:100vw + negative viewport margins inside drawers/portals
